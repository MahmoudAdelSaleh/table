<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…ØªØ¬Ø± Ø´Ø§Ù…Ù„ - Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</title>
  
  <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ­Ø¯Ø§Øª Firebase SDK Ø§Ù„Ø­Ø¯ÙŠØ«Ø© -->
  <script type="module">
    // Ù‡Ø§Ù…: Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø®Ø§ØµØ© Ù…Ù† Firebase
   // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCCEHZIqOdjXbEgvt49TzdeqYTm0cO3jro",
  authDomain: "table-2026.firebaseapp.com",
  databaseURL: "https://table-2026-default-rtdb.firebaseio.com",
  projectId: "table-2026",
  storageBucket: "table-2026.firebasestorage.app",
  messagingSenderId: "860273541011",
  appId: "1:860273541011:web:062d547802dd3cddc1b266",
  measurementId: "G-TWKVJFF97J"
};
    // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙŠ Ù†Ø­ØªØ§Ø¬Ù‡Ø§ ÙÙ‚Ø· Ù…Ù† Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, collection, addDoc, query, where, orderBy, onSnapshot, serverTimestamp, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

    // ØªÙ‡ÙŠØ¦Ø© Ø®Ø¯Ù…Ø§Øª Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const storage = getStorage(app);
    
    // ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    const authContainer = document.getElementById('authContainer');
    const appContainer = document.getElementById('appContainer');
    const chatContainer = document.getElementById('chatContainer');
    const statusMessage = document.getElementById('statusMessage');
    const chatBox = document.getElementById('chatBox');
    const welcomeUser = document.getElementById('welcomeUser');

    let currentProduct = "";
    let unsubscribeChat; // Ù…ØªØºÙŠØ± Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©

    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† alert()
    function showStatus(message, isError = false) {
        statusMessage.textContent = message;
        statusMessage.className = isError ? 'status-error' : 'status-success';
        statusMessage.style.display = 'block';
        setTimeout(() => { statusMessage.style.display = 'none'; }, 4000);
    }
    
    // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    onAuthStateChanged(auth, user => {
        if (user) {
            authContainer.style.display = 'none';
            appContainer.style.display = 'block';
            chatContainer.style.display = 'none';
            welcomeUser.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${user.displayName || user.email}`;
        } else {
            authContainer.style.display = 'block';
            appContainer.style.display = 'none';
            if (unsubscribeChat) unsubscribeChat(); // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø§Ø³ØªÙ…Ø§Ø¹ Ù†Ø´Ø· Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        }
    });

    // ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
    window.register = async () => {
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        if (!name || !email || !password) return showStatus("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„", true);
        
        try {
            const userCredential = await createUserWithEmailAndPassword(auth, email, password);
            // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø³Ù…
            await updateProfile(userCredential.user, { displayName: name });
            // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Firestore
            await setDoc(doc(db, "users", userCredential.user.uid), { name, email });
            showStatus("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±Ù ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...");
        } catch (error) {
            showStatus(`âŒ ${error.code.replace('auth/', '')}`, true);
        }
    };
    
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    window.login = async () => {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        if (!email || !password) return showStatus("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", true);
        
        try {
            await signInWithEmailAndPassword(auth, email, password);
        } catch (error) {
            showStatus(`âŒ ${error.code.replace('auth/', '')}`, true);
        }
    };

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
    window.logout = async () => {
        await signOut(auth);
    };

    // Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ÙŠÙ†
    window.startChat = (productName) => {
        currentProduct = productName;
        document.getElementById("chatTitle").textContent = `Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨Ø®ØµÙˆØµ: ${productName}`;
        document.getElementById("message").value = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ØºØ¨ ÙÙŠ Ø·Ù„Ø¨ "${productName}".`;
        chatContainer.style.display = 'block';
        
        // Ø£Ù‡Ù… ØªØ¹Ø¯ÙŠÙ„: Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const user = auth.currentUser;
        if (user) {
            listenToMessages(user, productName);
        }
    };

    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© (Ù†Øµ Ø£Ùˆ ØµÙˆØ±Ø©)
    async function submitMessage(payload) {
        const user = auth.currentUser;
        if (!user) return;

        try {
            await addDoc(collection(db, "messages"), {
                ...payload, // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ù†Øµ Ø£Ùˆ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø©)
                product: currentProduct,
                senderId: user.uid,
                // ** ØªØ¹Ø¯ÙŠÙ„ Ù…Ù‡Ù…: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… **
                participants: [user.uid, 'admin'], 
                timestamp: serverTimestamp()
            });
            return true;
        } catch (error) {
            showStatus("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©", true);
            return false;
        }
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ©
    window.sendMessage = async () => {
        const msgText = document.getElementById("message").value;
        if (!msgText.trim()) return;

        const success = await submitMessage({ text: msgText });
        if (success) {
            document.getElementById("message").value = "";
        }
    };

    // Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©
    window.sendImage = async () => {
        const file = document.getElementById("imageInput").files[0];
        const user = auth.currentUser;
        if (!user || !file) return showStatus("â— ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹", true);
        
        const uploadLabel = document.querySelector('label[for="imageInput"]');
        uploadLabel.textContent = 'â³'; // ØªØºÙŠÙŠØ± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±ÙØ¹

        const storageRef = ref(storage, `chat_images/${user.uid}/${Date.now()}_${file.name}`);
        try {
            const snapshot = await uploadBytes(storageRef, file);
            const imageUrl = await getDownloadURL(snapshot.ref);
            
            const success = await submitMessage({ imageUrl: imageUrl });
            if (success) {
                document.getElementById("imageInput").value = null;
                showStatus("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­");
            }
        } catch (error) {
             showStatus(`âŒ ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©: ${error.message}`, true);
        } finally {
            uploadLabel.textContent = 'ğŸ“·'; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ø­Ø§Ù„ØªÙ‡Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
        }
    };

    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø´ÙƒÙ„ Ø­ÙŠ
    function listenToMessages(user, productName) {
        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªØ¬Ù†Ø¨ ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (unsubscribeChat) {
            unsubscribeChat();
        }

        // ** ØªØ¹Ø¯ÙŠÙ„ Ø¬ÙˆÙ‡Ø±ÙŠ: Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† ÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ÙŠØ´Ø§Ø±Ùƒ ÙÙŠÙ‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø£Ø¯Ù…Ù† Ù„Ù†ÙØ³ Ø§Ù„Ù…Ù†ØªØ¬ **
        const q = query(
            collection(db, "messages"),
            where("product", "==", productName),
            where("participants", "array-contains", user.uid),
            orderBy("timestamp", "asc")
        );
        
        unsubscribeChat = onSnapshot(q, (querySnapshot) => {
            chatBox.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù‚Ø¨Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
            querySnapshot.forEach((doc) => {
                displayMessage(doc.data(), user.uid);
            });
            chatBox.scrollTop = chatBox.scrollHeight; // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø³ÙÙ„ Ø¯Ø§Ø¦Ù…Ù‹Ø§
        }, (error) => {
            console.error("Error listening to messages: ", error);
            showStatus("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„", true);
        });
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
    function displayMessage(data, currentUserId) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('message');

        // ØªØ­Ø¯ÙŠØ¯ Ù‡Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø±Ø³Ù„Ø© (Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) Ø£Ù… Ù…Ø³ØªÙ„Ù…Ø© (Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠØ±)
        msgDiv.classList.add(data.senderId === currentUserId ? 'sent' : 'received');
        
        let content = '';
        if (data.text) {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… textContent Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø«ØºØ±Ø§Øª XSS
            const p = document.createElement('p');
            p.textContent = data.text;
            content = p.outerHTML;
        }
        if (data.imageUrl) {
            content = `<img src="${data.imageUrl}" alt="ØµÙˆØ±Ø© Ù…Ø±Ø³Ù„Ø©" onclick="window.open('${data.imageUrl}', '_blank')">`;
        }
        
        const timestamp = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' }) : '';
        msgDiv.innerHTML = `${content}<span class="timestamp">${timestamp}</span>`;
        
        chatBox.appendChild(msgDiv);
    }
  </script>

  <style>
    :root {
      --primary-color: #007bff;
      --secondary-color: #6c757d;
      --bg-color: #f8f9fa;
      --surface-color: #ffffff;
      --text-color: #333;
      --border-color: #dee2e6;
      --sent-bg: #007bff;
      --received-bg: #e9ecef;
    }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      direction: rtl; 
      background-color: var(--bg-color); 
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    .container { 
      width: 100%;
      max-width: 500px; 
      background: var(--surface-color); 
      padding: 25px; 
      border-radius: 12px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease-in-out;
    }
    h2, h3 { 
      color: var(--primary-color);
      border-bottom: 2px solid var(--border-color);
      padding-bottom: 10px;
      margin-top: 0;
    }
    input, textarea { 
      width: 100%; 
      margin-bottom: 12px; 
      padding: 12px; 
      border-radius: 8px; 
      border: 1px solid var(--border-color); 
      box-sizing: border-box;
      transition: border-color 0.3s, box-shadow 0.3s;
      font-size: 1rem;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
    }
    button {
      padding: 12px 18px;
      border-radius: 8px;
      border: none;
      color: white;
      background-color: var(--primary-color);
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 16px;
      font-weight: 500;
    }
    button:hover {
      background-color: #0056b3;
    }
    .btn-secondary { background-color: var(--secondary-color); }
    .btn-secondary:hover { background-color: #5a6268; }
    .btn-danger { background-color: #dc3545; }
    .btn-danger:hover { background-color: #c82333; }
    .product { 
      background: #fdfdfd; 
      padding: 15px; 
      margin-bottom: 10px; 
      border-radius: 8px; 
      border: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chat-box { 
      height: 300px; 
      overflow-y: auto; 
      background: #f1f1f1; 
      padding: 15px; 
      border-radius: 8px; 
      margin-bottom: 10px; 
      border: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
        padding: 8px 12px;
        border-radius: 18px;
        max-width: 80%;
        word-wrap: break-word;
        line-height: 1.4;
    }
    .message.sent {
        background-color: var(--sent-bg);
        color: white;
        align-self: flex-start;
        border-bottom-left-radius: 4px;
    }
    .message.received {
        background-color: var(--received-bg);
        color: var(--text-color);
        align-self: flex-end;
        border-bottom-right-radius: 4px;
    }
    .message p { margin: 0; }
    .message img {
        max-width: 100%;
        border-radius: 10px;
        margin-top: 5px;
        cursor: pointer;
    }
    .timestamp {
        font-size: 0.75em;
        color: rgba(255,255,255,0.7);
        display: block;
        text-align: left;
        margin-top: 4px;
    }
    .received .timestamp {
        color: #666;
    }
    #statusMessage {
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 8px;
        text-align: center;
        font-weight: bold;
        display: none;
    }
    .status-success { background-color: #d4edda; color: #155724; }
    .status-error { background-color: #f8d7da; color: #721c24; }
    .input-group { display: flex; gap: 10px; }
    .input-group input[type="file"] { display: none; }
    .input-group label {
        padding: 12px;
        border-radius: 8px;
        background-color: var(--secondary-color);
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .user-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
  </style>
</head>
<body>

  <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¬Ø¯ÙŠØ¯) -->
  <div id="authContainer" class="container">
    <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
    <div id="statusMessage"></div>
    <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯)">
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
    <div class="input-group">
        <button onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
        <button onclick="login()" class="btn-secondary">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>

  <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) -->
  <div id="appContainer" class="container" style="display: none;">
    <div class="user-header">
        <h3 id="welcomeUser"></h3>
        <button onclick="logout()" class="btn-danger">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <h2>ğŸ›ï¸ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
    <div class="product">
        <span>Ù…Ù†ØªØ¬ 1 - 100 Ø¬Ù†ÙŠÙ‡</span>
        <button onclick="startChat('Ù…Ù†ØªØ¬ 1')">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
    </div>
    <div class="product">
        <span>Ù…Ù†ØªØ¬ 2 - 150 Ø¬Ù†ÙŠÙ‡</span>
        <button onclick="startChat('Ù…Ù†ØªØ¬ 2')">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
    </div>

    <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†ØªØ¬) -->
    <div id="chatContainer" style="display: none; margin-top: 20px;">
        <h3 id="chatTitle"></h3>
        <div class="chat-box" id="chatBox"></div>
        <textarea id="message" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."></textarea>
        <div class="input-group">
            <button onclick="sendMessage()" style="flex-grow: 1;">ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„</button>
            <input type="file" id="imageInput" accept="image/*" onchange="sendImage()">
            <label for="imageInput">ğŸ“·</label>
        </div>
    </div>
  </div>

</body>
</html>
